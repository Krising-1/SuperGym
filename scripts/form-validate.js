var e=document.querySelector(".form__form"),n=e.querySelector(".form__button-submit"),t=e.querySelector(".form__input--name"),r=e.querySelector(".form__input--tel"),i=e.querySelector(".form__wrong-message--tel"),m=e.querySelector(".form__wrong-message--name"),u=e.querySelector(".form__congratulation-message"),c=/^\+?[0-9]{1,30}$/,_=/^\+?[0-9]{11}$/,f=/^[^\s][a-z а-яё]{1,30}[^\s]$/i,d=/^[a-z а-яё]{1,30}$/i,s=(o,a,l)=>{o.innerHTML=a,l.classList.add("form__input--error")},p=()=>{u.innerHTML="\u0424\u043E\u0440\u043C\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430!",n.classList.add("form__button-submit--sent"),setTimeout(()=>{n.classList.remove("form__button-submit--sent"),u.innerHTML=""},5*1e3)};e.addEventListener("submit",o=>{if(o.preventDefault(),c.test(r.value))r.classList.remove("form__input--error");else{s(i,"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0446\u0438\u0444\u0440\u044B",r);return}if(_.test(r.value))r.classList.remove("form__input--error");else{s(i,"\u041D\u043E\u043C\u0435\u0440 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u0442 11 \u0446\u0438\u0444\u0440",r);return}if(d.test(t.value))t.classList.remove("form__input--error");else{s(m,"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0411\u0443\u043A\u0432\u044B",t);return}if(f.test(t.value))t.classList.remove("form__input--error");else{s(m,"\u0423\u0431\u0435\u0440\u0438\u0442\u0435 \u043B\u0438\u0448\u043D\u0438\u0438 \u043F\u0440\u043E\u0431\u0435\u043B\u044B",t);return}n.disabled=!0,fetch("https://echo.htmlacademy.ru/.",{method:"POST",body:new FormData(o.target)}).then(a=>{if(!a.ok)throw new Error("\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0443. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437")}).then(p()).finally(n.disabled=!1)});
